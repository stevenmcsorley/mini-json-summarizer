<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Mini JSON Summarizer - A deterministic-first service for summarizing large JSON payloads with evidence, redaction, and citations.">
    <title>Mini JSON Summarizer | Evidence-Based JSON Analysis</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            padding: 60px 20px;
            color: white;
        }

        h1 {
            font-size: 3.5rem;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .tagline {
            font-size: 1.3rem;
            opacity: 0.95;
            margin-bottom: 30px;
        }

        .badges {
            margin: 20px 0;
        }

        .badge {
            display: inline-block;
            background: rgba(255,255,255,0.2);
            padding: 8px 16px;
            border-radius: 20px;
            margin: 5px;
            font-size: 0.9rem;
            backdrop-filter: blur(10px);
        }

        .main-content {
            background: white;
            border-radius: 20px;
            padding: 40px;
            margin-top: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        h2 {
            color: #667eea;
            margin-top: 40px;
            margin-bottom: 20px;
            font-size: 2rem;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }

        h2:first-of-type {
            margin-top: 0;
        }

        h3 {
            color: #764ba2;
            margin-top: 30px;
            margin-bottom: 15px;
            font-size: 1.5rem;
        }

        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .feature-card {
            background: linear-gradient(135deg, #667eea15 0%, #764ba215 100%);
            padding: 25px;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }

        .feature-card h3 {
            margin-top: 0;
            font-size: 1.2rem;
        }

        .code-block {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 20px;
            border-radius: 10px;
            overflow-x: auto;
            margin: 20px 0;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.9rem;
            line-height: 1.5;
        }

        .code-block .comment {
            color: #6a9955;
        }

        .code-block .string {
            color: #ce9178;
        }

        .code-block .keyword {
            color: #569cd6;
        }

        .code-block .number {
            color: #b5cea8;
        }

        .install-section {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 10px;
            margin: 30px 0;
        }

        .btn {
            display: inline-block;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px 30px;
            border-radius: 25px;
            text-decoration: none;
            margin: 10px 10px 10px 0;
            transition: transform 0.2s, box-shadow 0.2s;
            font-weight: 600;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #56ab2f 0%, #a8e063 100%);
        }

        ul {
            margin-left: 20px;
            margin-bottom: 20px;
        }

        li {
            margin: 10px 0;
        }

        .highlight-box {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }

        footer {
            text-align: center;
            padding: 40px 20px;
            color: white;
            margin-top: 40px;
        }

        .api-example {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 2.5rem;
            }

            .tagline {
                font-size: 1.1rem;
            }

            .main-content {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Mini JSON Summarizer</h1>
            <p class="tagline">Deterministic-first service for summarizing large JSON payloads with evidence, redaction, and citations</p>
            <div class="badges">
                <span class="badge">Python 3.x</span>
                <span class="badge">FastAPI</span>
                <span class="badge">Server-Sent Events</span>
                <span class="badge">PII Redaction</span>
                <span class="badge">Docker Ready</span>
            </div>
            <div style="margin-top: 30px;">
                <a href="https://github.com/stevenmcsorley/mini-json-summarizer" class="btn">View on GitHub</a>
                <a href="#getting-started" class="btn btn-secondary">Get Started</a>
            </div>
        </header>

        <div class="main-content">
            <h2>Features</h2>
            <div class="features">
                <div class="feature-card">
                    <h3>üìä Deterministic Analysis</h3>
                    <p>Schema-guided traversal with numeric rollups, categorical frequency tables, and JSONPath citations for every claim.</p>
                </div>
                <div class="feature-card">
                    <h3>üîí PII Redaction</h3>
                    <p>Automatic scrubbing of sensitive data with configurable regex patterns and JSONPath deny-lists.</p>
                </div>
                <div class="feature-card">
                    <h3>‚ö° Streaming Responses</h3>
                    <p>Server-Sent Events (SSE) or batched responses for real-time updates on large payloads.</p>
                </div>
                <div class="feature-card">
                    <h3>üîç Evidence-Based</h3>
                    <p>Every summary bullet includes citations with representative value previews from the source JSON.</p>
                </div>
                <div class="feature-card">
                    <h3>üìà Baseline Comparison</h3>
                    <p>Highlight additions, removals, and changes between JSON payloads for diff analysis.</p>
                </div>
                <div class="feature-card">
                    <h3>üê≥ Container Ready</h3>
                    <p>Fully containerized with Docker support for easy deployment anywhere.</p>
                </div>
            </div>

            <h2 id="getting-started">Getting Started</h2>
            <div class="install-section">
                <h3>Installation</h3>
                <div class="code-block">
<span class="comment"># Clone the repository</span>
git clone https://github.com/stevenmcsorley/mini-json-summarizer.git
cd mini-json-summarizer

<span class="comment"># Create virtual environment</span>
python -m venv .venv
.venv\Scripts\activate  <span class="comment"># On Windows</span>
<span class="comment"># source .venv/bin/activate  # On macOS/Linux</span>

<span class="comment"># Install dependencies</span>
pip install -e .[dev]

<span class="comment"># Run the service</span>
uvicorn app.main:app --reload --port <span class="number">8080</span>
                </div>
            </div>

            <h2>API Endpoints</h2>

            <h3>/v1/summarize-json</h3>
            <p>Accepts inline JSON or remote URLs (up to 20 MB) and emits Server-Sent Events or batched responses.</p>

            <div class="api-example">
                <h4>Example Request</h4>
                <div class="code-block">
curl -N -X POST http://localhost:8080/v1/summarize-json \
  -H <span class="string">"Content-Type: application/json"</span> \
  -d <span class="string">'{
    "json": {"orders":[
      {"id":1,"total":20,"status":"paid"},
      {"id":2,"total":40,"status":"paid"},
      {"id":3,"total":5,"status":"failed"}
    ]},
    "focus": ["orders", "totals"],
    "include_root_summary": false,
    "stream": true
  }'</span>
                </div>

                <h4>Example Response (Streaming)</h4>
                <div class="code-block">
<span class="keyword">data:</span> {<span class="string">"phase"</span>:<span class="string">"summary"</span>,<span class="string">"bullet"</span>:{
  <span class="string">"text"</span>:<span class="string">"orders: 3 records; total: sum 65, avg 21.67"</span>,
  <span class="string">"citations"</span>:[{
    <span class="string">"path"</span>:<span class="string">"$.orders[*].total"</span>,
    <span class="string">"value_preview"</span>:[<span class="number">20</span>,<span class="number">40</span>,<span class="number">5</span>]
  }]
}}

<span class="keyword">data:</span> {<span class="string">"phase"</span>:<span class="string">"complete"</span>,<span class="string">"evidence_stats"</span>:{
  <span class="string">"paths_count"</span>:<span class="number">2</span>,
  <span class="string">"bytes_examined"</span>:<span class="number">254</span>,
  <span class="string">"elapsed_ms"</span>:<span class="number">7</span>
}}
                </div>
            </div>

            <h3>/v1/chat</h3>
            <p>Refine focus based on conversation history using the deterministic engine.</p>

            <div class="api-example">
                <h4>Example Request</h4>
                <div class="code-block">
curl -X POST http://localhost:8080/v1/chat \
  -H <span class="string">"Content-Type: application/json"</span> \
  -d <span class="string">'{
    "messages": [
      {"role":"system","content":"You summarize JSON evidence."},
      {"role":"user","content":"Zoom into failed payments."}
    ],
    "json": {"payments":[{"amount":50,"status":"failed"}]},
    "include_root_summary": true
  }'</span>
                </div>
            </div>

            <h3>/healthz</h3>
            <p>Health check endpoint for monitoring.</p>
            <div class="code-block">
curl http://localhost:8080/healthz
<span class="comment"># -> {"status":"ok","engine":"deterministic","version":"1.0.0"}</span>
            </div>

            <h2>Output Schema</h2>
            <ul>
                <li><strong>bullet.text</strong> ‚Äì Concise, human-readable summary sentence</li>
                <li><strong>bullet.citations[]</strong> ‚Äì JSONPath references with value previews</li>
                <li><strong>bullet.evidence</strong> ‚Äì Structured aggregates (counts, sums, top-k tables)</li>
                <li><strong>evidence_stats</strong> ‚Äì Traceability metadata (paths, bytes, elapsed time)</li>
            </ul>

            <h2>Configuration</h2>
            <p>Settings are supplied via environment variables or <code>.env</code> file:</p>
            <ul>
                <li><code>MAX_PAYLOAD_BYTES</code> (default: 20971520 / 20 MB)</li>
                <li><code>MAX_JSON_DEPTH</code> (default: 64)</li>
                <li><code>PII_REDACTION_ENABLED</code> (default: true)</li>
                <li><code>ALLOW_ORIGINS</code> for CORS whitelisting</li>
                <li><code>STREAMING_CHUNK_DELAY_MS</code> (default: 100)</li>
            </ul>

            <h2>Docker Deployment</h2>
            <div class="code-block">
<span class="comment"># Build the image</span>
docker build -t mini-json-summarizer .

<span class="comment"># Run the container</span>
docker run -p <span class="number">8080</span>:<span class="number">8080</span> mini-json-summarizer
            </div>

            <h2>Use Cases</h2>
            <div class="highlight-box">
                <strong>Perfect for:</strong>
                <ul style="margin-top: 10px;">
                    <li>Analyzing large API exports and log files</li>
                    <li>Generating compliance-safe reporting with PII redaction</li>
                    <li>Creating digestible summaries of complex incident payloads</li>
                    <li>Comparing JSON datasets to identify changes</li>
                    <li>Building evidence-based data analysis tools</li>
                </ul>
            </div>

            <h2>Testing</h2>
            <div class="code-block">
<span class="comment"># Run test suite</span>
pytest

<span class="comment"># Run with coverage</span>
pytest --cov=app
            </div>

            <h2>Interactive Documentation</h2>
            <p>Once the service is running, visit the interactive OpenAPI documentation:</p>
            <ul>
                <li><strong>Swagger UI:</strong> <a href="http://localhost:8080/docs" target="_blank">http://localhost:8080/docs</a></li>
                <li><strong>ReDoc:</strong> <a href="http://localhost:8080/redoc" target="_blank">http://localhost:8080/redoc</a></li>
            </ul>

            <h2>License</h2>
            <p>MIT ¬© 2025 Steven McSorley</p>

            <div style="margin-top: 40px; text-align: center;">
                <a href="https://github.com/stevenmcsorley/mini-json-summarizer" class="btn">Star on GitHub</a>
                <a href="https://github.com/stevenmcsorley/mini-json-summarizer/issues" class="btn btn-secondary">Report Issue</a>
            </div>
        </div>

        <footer>
            <p>Built with ‚ù§Ô∏è by Steven McSorley | <a href="https://github.com/stevenmcsorley/mini-json-summarizer" style="color: white; text-decoration: underline;">GitHub Repository</a></p>
        </footer>
    </div>
</body>
</html>
